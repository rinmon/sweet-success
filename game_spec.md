# Sweet Success ゲーム仕様書

「Sweet Success」は、クッキーショップ経営シミュレーションゲームです。プレイヤーはクッキーを作り、在庫を管理し、顧客からの注文を処理して、成功したお菓子ビジネスを築き上げます。

## ゲームの概要

### コアとなるリソース:
- 「クッキー」: 基本的な通貨および商品
- 「コイン」: マーケットで使用できる二次通貨
- 「材料」: クッキーを作るために必要な資源
- 「レシピ」: さまざまな種類のクッキーを作るための設計図
- 「経験値」: プレイヤーのレベルアップに必要

### ゲームシステム:

#### 1. 生産システム
- クリック生産: 大きなクッキーボタンをクリックして基本クッキーを生産
- 自動生産: 購入したユニットによる自動クッキー生産
- レシピ調理: 材料を使って様々な種類のクッキーを作る
- 材料の神秘: まだ解禁していない材料はヒントのみ表示

#### 2. プレイヤー管理システム
- プレイヤー名と経験値レベル
- 連続ログインボーナス（日単位、週単位）
- ゲーム内時間システム（時間帯や曜日によってゲーム内イベントが変化）

#### 3. 経済システム
- クッキー販売: 注文処理による収入獲得
- マーケット: クッキー価格変動システム
- 材料購入: クッキーを使って材料を購入
- アップグレード: 生産効率や機能強化の購入

#### 4. 在庫管理システム
- クッキーの保管容量制限
- 在庫のアップグレード機能
- 在庫の視覚的管理UI

#### 5. 注文システム
- 時間制限付き注文の受注と処理
- 特別注文（報酬2倍、時間制限短縮）
- 時間帯・曜日による注文頻度の変化
- 注文完了時の報酬と経験値

#### 6. 統計分析システム
- 生産、販売、在庫の詳細な統計情報
- 日別/週別/月別の分析グラフ
- ベストセラー商品情報

## ゲームバランス:

### 初期段階
- 主にクリック生産に依存
- シンプルなレシピのみ解禁済み
- 少量の注文のみ

### 中期段階
- 自動生産ユニットの増強
- 複数の材料とレシピの解禁
- 注文の頻度と量が増加
- 在庫管理が重要になる

### 後期段階
- 高度なレシピの活用
- 戦略的な生産計画
- 注文の最適化
- 統計データを活用した効率化

## 機能の詳細

### 自動生産ユニット:
- クリックヘルパー: 毎秒0.1クッキーを生産
- おばあちゃん: 毎秒1クッキーを生産
- 工場: 毎秒10クッキーを生産
- その他、高性能ユニット

### レシピシステム:
- 基本クッキー: 少ない材料で作れる
- 特殊クッキー: 珍しい材料を使用
- 高級クッキー: 多くの材料と長い調理時間が必要だが、高価値

### 材料業者契約システム:
- 小麦粉業者: 契約を結び小麦粉を自動生産
- 砂糖業者: 砂糖を自動生産
- バター業者: バターを自動生産
- 契約オプション: 日次・週次・月次契約（期間が長いほど割引率が高い）
- 維持費用: 契約中は日々クッキーを支払う必要あり
- 発注通知: 発注量達成時に通知が表示される
- プレイヤーレベルに応じた業者の解放: レベルが上がると生産性の高い業者が利用可能に

### 注文処理:
- 通常注文: バランスの取れた時間制限と報酬
- 特別注文: 短い時間制限だが報酬が2倍
- 時間帯効果: 昼間(11時〜14時)は注文が多く、夜間(22時〜6時)は少ない
- 週末効果: 土日は注文が増加

### プレイヤー進行:
- レベルアップによる新機能解禁
- 経験値によるレベル上昇
- 連続ログインによるボーナス獲得

## 技術的実装:

### フロントエンド:
- HTML/CSS/JavaScriptのみで実装
- 各機能を個別のJSファイルに分割
- Chartjsによるグラフ表示
- モジュラー設計による拡張性
- 管理パネルによるゲームバランス調整

### データ管理:
- ローカルストレージによるゲームデータの永続化
- モジュール間のデータ連携
- バージョン管理システムによる更新履歴の追跡

### UI/UX:
- レスポンシブデザインによるモバイル対応
- アニメーションによる視覚的フィードバック
- わかりやすいチュートリアル

## 将来の拡張可能性:

- 追加のレシピと材料
- 季節イベントと限定コンテンツ
- 複数の店舗経営
- ソーシャル機能（フレンド訪問など）
- 成果システム（アチーブメント）
- サウンドエフェクトとBGM

## 開発およびデプロイ環境

### リポジトリ情報
- GitHubリポジトリ: https://github.com/rinmon/sweet-success
- 目的: オープンソースとして公開し、コミュニティからのフィードバックを得るため
- ライセンス: MIT License

### テスト環境
- プラットフォーム: AWS Lightsail (Node.js)
- テストURL: https://apl.chotto.news/games/sweetsuccess/
- 更新サイクル: デプロイスクリプトによる自動更新

## 更新履歴

### バージョン 1.4.2（2025-05-08）
- **注文システムのバグ修正**:
  - テンプレートリテラル構文エラーの修正
  - HTML生成ロジックの整理
  - インベントリ連携の安定性向上
- **データ保存機能の完全修正**:
  - 残りの誤った関数名参照を修正

### バージョン 1.4.1（2025-05-08）
- **データ保存強化**:
  - ゲーム全体の保存メカニズムを改善
  - 材料業者契約の持続性を確保
  - 各モジュールでの保存呼び出しを標準化
- **注文システムの改善**:
  - 機能モジュール化によるコード整理
  - 在庫システムとの動的連携実装
  - 注文完了ボタンの自動有効化機能
  - ステータスメッセージからのタブリンク機能

### バージョン 1.4.0（2025-05-08）
- 材料業者契約システムの実装
- 小麦粉、砂糖、バターの自動生産機能
- 日次・週次・月次契約システム
- プレイヤーレベルに応じた業者の解放

### バージョン 1.3.4（2025-05-08）
- バーガーメニューの最終調整・細部のバグ修正
- 仕様書・バージョン管理の整理
- モバイル対応の強化（タッチ操作最適化、レスポンシブデザイン改善）

### バージョン 1.3.3（2025-05-08）
- バーガーメニューの表示問題を完全に修正
- モバイルメニューのCSSとJavaScriptを再設計
- 表示・非表示の切り替えを改善

### バージョン 1.3.2（2025-05-08）
- バーガーメニューの表示問題を修正
- メニューアイテムが選択できない問題を解決

### バージョン 1.3.1（2025-05-07）
- バーガーメニューと管理ボタンの重なり問題を修正

### バージョン 1.3.0（2025-05-07）
- モバイル対応の強化
- バーガーメニューの実装によるスマートフォン向けナビゲーション改善
- UI/UXの調整

### バージョン 1.2.0（2025-04-25）
- 統計機能の強化
- 在庫管理システムの改善
- パフォーマンス最適化

### バージョン 1.1.0（2025-04-10）
- 注文システムの追加
- レシピ機能の拡張
- ゲーム内時間システムの実装

### バージョン 1.0.0（2025-03-15）
- 初期リリース
- 基本的なクッキー生産システム
- 自動生産ユニット
- ベーシックなマーケットシステム
